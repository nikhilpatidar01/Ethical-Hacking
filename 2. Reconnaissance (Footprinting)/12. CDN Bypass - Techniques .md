
# ğŸ›¡ï¸ CDN Bypass â€” Techniques & Concepts

## ğŸŒ What is a CDN?

A **Content Delivery Network (CDN)** helps improve performance and security by:

* âœ… Caching content geographically closer to users
* âœ… Masking the **origin server's IP address**
* âœ… Providing **security features** like WAF, rate-limiting, and DDoS protection

---

## ğŸš¨ What is CDN Bypass?

**CDN Bypass** refers to methods used to:

* ğŸ” Discover the **real/origin IP** behind a CDN
* ğŸš« Interact directly with the **backend server**, bypassing CDN protections like WAFs

> âš ï¸ **Legal Warning**: These techniques are for **educational and authorized testing only**. Unauthorized scanning, probing, or exploitation is illegal and unethical.

---

## ğŸ§  Common CDN Bypass Techniques

### **1. Find the Origin IP**

#### ğŸ”¸ a. DNS History / Passive DNS

Check DNS history to find pre-CDN IP records.

Tools:

* [SecurityTrails](https://securitytrails.com/)
* [ViewDNS IP History](https://viewdns.info/iphistory/)
* [RiskIQ PassiveTotal](https://community.riskiq.com/)

#### ğŸ”¸ b. Subdomain Enumeration

Look for subdomains not covered by the CDN.

Command:

```bash
amass enum -d target.com
```

Tool: [OWASP Amass](https://github.com/owasp-amass/amass)

#### ğŸ”¸ c. Shodan / Censys Search

Search IP using SSL cert, favicon hash, or HTTP headers.

Example Queries:

* `ssl.cert.subject.CN: target.com`
* `http.favicon.hash: <hash>`

Tools:

* [Shodan](https://www.shodan.io/)
* [Censys](https://censys.io/)

#### ğŸ”¸ d. Email/Webmail Leaks

Check password reset emails or headers revealing the real IP address.

#### ğŸ”¸ e. Misconfigured DNS

Sometimes `ftp.target.com` or other records directly resolve to the origin server.

#### ğŸ”¸ f. SSL Certificate Transparency Logs

Find hidden subdomains from SSL certs.

Tool: [CertSpotter](https://sslmate.com/certspotter/)

---

### **2. Test IP Candidates**

Once potential origin IPs are found:

```bash
curl -H "Host: target.com" http://<origin_ip>
```

If the page returns the actual website, the **origin IP is exposed**.

Or use:

```bash
nmap -sV <origin_ip>
```

---

### **3. Check Firewall Misconfigurations**

Misconfigured firewalls may let attackers bypass CDN:

* `iptables` or `fail2ban` might not limit traffic to CDN ranges.
* Use WAF detection tools:

Tool: [wafw00f](https://github.com/EnableSecurity/wafw00f)

```bash
wafw00f http://target.com
```

---

### **4. Leaked Files or Git Repos**

Check for `.env`, `.git`, or internal server config files available through misconfigured subdomains or paths bypassing the CDN.

---

## ğŸ” Defense Tips (Blue Team)

* âœ… **Restrict origin IPs** to only allow connections from CDN IP ranges
  Example: [Cloudflare IP List](https://www.cloudflare.com/ips/)
* ğŸ”¥ Apply **firewall allow-lists**
* ğŸ•µï¸ Monitor DNS records for changes or leaks
* ğŸ“¡ Regularly scan infrastructure for exposed ports, misconfigs, and old records

---

ğŸ“– Reference: Notes inspired by guidance from Mr. Sachin Verma Sir ([Armour Infosec](https://www.armourinfosec.com/)) and enriched with further improvements and updates
